webpackJsonp([0],{"5hti":function(t,e){},ABj6:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={name:"Table",data:function(){return{isLoading:!0,input:"",keyword:"",dialogAddFormVisible:!1,dialogEditFormVisible:!1,formLabelWidth:"120px",cates:[],catesProps:{label:"name",value:"id"},lists:[],form:{cateid:[],title:"",author:"",content:"",orderid:""},editid:0,rules:{cateid:[{validator:function(t,e,o){if(0===e.length)return o(new Error("请选择所属分类")),!1;o()},message:"请选择所属分类",trigger:"blur"}],title:[{required:!0,message:"请输入文章标题",trigger:"blur"}],author:[{required:!0,message:"请输入文章作者",trigger:"blur"}],content:[{required:!0,message:"请输入文章内容",trigger:"blur"}],orderid:[{required:!0,message:"请输入文章排序号",trigger:"blur"}]}}},mounted:function(){var t=this;this.$http.get("get_all_cate_list.php").then(function(e){t.cates=e.data||[]}),this.$http.get("get_article_list.php?page=1&perpage=8").then(function(e){t.isLoading=!1,t.lists=e.data||[]})},methods:{resetForm:function(t){var e=this;this.$nextTick(function(t){e.form={cateid:[],title:"",author:"",content:"",orderid:""}})},submitAddForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("填写有误"),!1;var o=new URLSearchParams;o.append("bigid",e.form.cateid[0]),o.append("smallid",e.form.cateid[1]),o.append("title",e.form.title),o.append("author",e.form.author),o.append("content",e.form.content),o.append("orderid",e.form.orderid),e.$http.post("add_article.php",o).then(function(t){console.log(t.data),e.lists.unshift(t.data[0]),e.dialogAddFormVisible=!1})})},submitEditForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("填写有误"),!1;var o=new URLSearchParams;o.append("id",e.edited),o.append("bigid",e.form.cateid[0]),o.append("smallid",e.form.cateid[1]),o.append("title",e.form.title),o.append("author",e.form.author),o.append("content",e.form.content),o.append("orderid",e.form.orderid),e.$http.post("edit_article.php",o).then(function(t){console.log(t.data),e.lists.unshift(t.data[0]),e.dialogEditFormVisible=!1})})},chaxun:function(){var t=this.lists.filter(function(t){return-1!=t.title.indexOf(this.input)}.bind(this));return console.log(t),t},editItem:function(t){this.dialogEditFormVisible=!0,this.editid=t.id,this.form={cateid:[t.bigid,t.smallid],title:t.title,author:t.author,content:t.content,orderid:t.orderid}},delItem:function(t,e){var o=this;this.$http.get("del_article.php?id="+e).then(function(e){o.lists.splice(t,1)})}}},i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"table"},[o("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"loading"}),t._v(" "),o("el-dialog",{attrs:{title:"新增文章",visible:t.dialogAddFormVisible},on:{"update:visible":function(e){t.dialogAddFormVisible=e},open:function(e){t.resetForm("form")}}},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[o("el-form-item",{attrs:{label:"所属分类",prop:"cateid","label-width":t.formLabelWidth}},[o("el-cascader",{attrs:{options:t.cates,props:t.catesProps},model:{value:t.form.cateid,callback:function(e){t.$set(t.form,"cateid",e)},expression:"form.cateid"}}),t._v("\n            "+t._s(t.form.cateid)+"\n            ")],1),t._v(" "),o("el-form-item",{attrs:{label:"文章标题",prop:"title","label-width":t.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"文章作者",prop:"author","label-width":t.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.author,callback:function(e){t.$set(t.form,"author",e)},expression:"form.author"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"文章内容",prop:"content","label-width":t.formLabelWidth}},[o("el-input",{attrs:{type:"textarea",rows:4},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"排序号码",prop:"orderid","label-width":t.formLabelWidth}},[o("el-input",{attrs:{type:"textarea",rows:4},model:{value:t.form.orderid,callback:function(e){t.$set(t.form,"orderid",e)},expression:"form.orderid"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.resetForm("form")}}},[t._v("重置")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitAddForm("form")}}},[t._v("确 定")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:"新增文章",visible:t.dialogEditFormVisible},on:{"update:visible":function(e){t.dialogEditFormVisible=e}}},[o("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[o("el-form-item",{attrs:{label:"所属分类",prop:"cateid","label-width":t.formLabelWidth}},[o("el-cascader",{attrs:{options:t.cates,props:t.catesProps},model:{value:t.form.cateid,callback:function(e){t.$set(t.form,"cateid",e)},expression:"form.cateid"}}),t._v("\n            "+t._s(t.form.cateid)+"\n            ")],1),t._v(" "),o("el-form-item",{attrs:{label:"文章标题",prop:"title","label-width":t.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"文章作者",prop:"author","label-width":t.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:t.form.author,callback:function(e){t.$set(t.form,"author",e)},expression:"form.author"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"文章内容",prop:"content","label-width":t.formLabelWidth}},[o("el-input",{attrs:{type:"textarea",rows:4},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"排序号码",prop:"orderid","label-width":t.formLabelWidth}},[o("el-input",{attrs:{type:"textarea",rows:4},model:{value:t.form.orderid,callback:function(e){t.$set(t.form,"orderid",e)},expression:"form.orderid"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.resetForm("form")}}},[t._v("重置")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.submitEditForm("form")}}},[t._v("确 定")])],1)],1),t._v(" "),o("div",{staticClass:"nav"},[o("h2",[t._v("表格")]),t._v(" "),o("el-breadcrumb",{attrs:{separator:"/"}},[o("el-breadcrumb-item",{attrs:{to:{}}},[t._v("首页")]),t._v(" "),o("el-breadcrumb-item",[o("a",{attrs:{href:"/"}},[t._v("活动管理")])]),t._v(" "),o("el-breadcrumb-item",[t._v("活动列表")]),t._v(" "),o("el-breadcrumb-item",[t._v("活动详情")])],1)],1),t._v(" "),o("div",{staticClass:"seach"},[o("el-input",{staticClass:"input",attrs:{placeholder:"请输入内容"},model:{value:t.input,callback:function(e){t.input=e},expression:"input"}}),t._v(" "),o("el-button",{attrs:{type:"danger"},on:{click:t.chaxun}},[t._v("查询")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogAddFormVisible=!0}}},[t._v("新增")])],1),t._v(" "),o("div",{staticClass:"table"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.chaxun(),"default-sort":{prop:"date",order:"descending"}}},[o("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),o("el-table-column",{attrs:{label:"#",sortable:"",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("a",{attrs:{href:""}},[t._v(t._s(e.row.id))])]}}])}),t._v(" "),o("el-table-column",{attrs:{prop:"author",label:"作者",sortable:"",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"cnaddtime",label:"日期"}}),t._v(" "),o("el-table-column",{attrs:{prop:"content",label:"内容"}}),t._v(" "),o("el-table-column",{attrs:{prop:"orderid",label:"个数"}}),t._v(" "),o("el-table-column",{attrs:{prop:"title",label:"标题"}}),t._v(" "),o("el-table-column",{attrs:{label:"操作",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){t.editItem(e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){t.delItem(e.$index,e.row.id)}}},[t._v("删除")])]}}])})],1)],1)],1)},staticRenderFns:[]};var a=o("vSla")(r,i,!1,function(t){o("5hti")},"data-v-d0e7547c",null);e.default=a.exports}});
//# sourceMappingURL=0.8369766fe3a3dce2692f.js.map